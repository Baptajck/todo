(this.webpackJsonptodolist=this.webpackJsonptodolist||[]).push([[0],{42:function(e,t,a){},43:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var c=a(2),n=a.n(c),s=a(33),r=a.n(s),l=(a(42),a(43),a(6)),i=a(5),o=a(4),d="ADD_TASK",j="DELETE_TASK",b="UPDATE_TASK",u="COMPLETED_TASK",O="CHANGE_TASK",m="BACK_TO_TASK",h=a(1),p={tasks:[],complete:[]},x=function(e,t){switch(t.type){case"CHANGE_LOCAL":return Object(o.a)(Object(o.a)({},e),{},{tasks:Object(i.a)(t.payload.tasks),complete:Object(i.a)(t.payload.complete)});case O:var a=e.tasks.filter((function(e){return e.id!==t.payload.id})),c=Object(o.a)(Object(o.a)({},t.payload.task[0]),{},{realTitle:t.payload.desc.title,description:t.payload.desc.desc});return Object(o.a)(Object(o.a)({},e),{},{tasks:[].concat(Object(i.a)(a),[c])});case d:var n={id:Math.floor(100*Math.random()),title:t.payload,completed:!1};return localStorage.setItem("tasks",JSON.stringify([].concat(Object(i.a)(e.tasks),[n]))),Object(o.a)(Object(o.a)({},e),{},{tasks:[].concat(Object(i.a)(e.tasks),[n])});case b:var s=t.payload,r=s.updateText,l=s.todo.id,h={id:l,title:r.trim(),completed:!1},p=e.tasks.filter((function(e){return e.id!==l}));return localStorage.setItem("tasks",JSON.stringify([h].concat(Object(i.a)(p)))),Object(o.a)(Object(o.a)({},e),{},{tasks:[h].concat(Object(i.a)(p))});case j:var x=e.tasks.filter((function(e){return e.id!==t.payload})),f=e.complete.filter((function(e){return e.id!==t.payload}));return localStorage.setItem("tasks",JSON.stringify(Object(i.a)(x))),localStorage.setItem("complete",JSON.stringify(Object(i.a)(f))),Object(o.a)(Object(o.a)({},e),{},{tasks:Object(i.a)(x),complete:Object(i.a)(f)});case m:var v=t.payload,y=v.id,g=v.title,N=e.complete.filter((function(e){return e.id!==y})),k={id:y,title:g,completed:!1};return localStorage.setItem("tasks",JSON.stringify([].concat(Object(i.a)(e.tasks),[k]))),localStorage.setItem("complete",JSON.stringify(Object(i.a)(N))),Object(o.a)(Object(o.a)({},e),{},{tasks:[].concat(Object(i.a)(e.tasks),[k]),complete:Object(i.a)(N)});case u:var S=t.payload,C=S.id,w=S.title,T=e.tasks.filter((function(e){return e.id!==C})),L={id:C,title:w,completed:!0};return localStorage.setItem("tasks",JSON.stringify(Object(i.a)(T))),localStorage.setItem("complete",JSON.stringify([].concat(Object(i.a)(e.complete),[L]))),Object(o.a)(Object(o.a)({},e),{},{tasks:Object(i.a)(T),complete:[].concat(Object(i.a)(e.complete),[L])});default:return e}},f=Object(c.createContext)(),v=function(e){var t=e.children,a=Object(c.useReducer)(x,p);return Object(h.jsx)(f.Provider,{value:a,children:t})},y=a(12),g=a(17),N=a(35),k=a(36),S={backgroundColor:"#eee",textAlign:"center",padding:"1em"},C=function(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),a=t[0],n=t[1],s=Object(c.useState)(!1),r=Object(l.a)(s,2),i=r[0],o=r[1],O=Object(c.useState)(""),p=Object(l.a)(O,2),x=p[0],v=p[1],C=Object(c.useState)(!1),w=Object(l.a)(C,2),T=w[0],L=w[1],A=Object(c.useState)(""),I=Object(l.a)(A,2),E=I[0],F=I[1],D=Object(c.useContext)(f),J=Object(l.a)(D,2),_=J[0],K=J[1];Object(c.useEffect)((function(){var e=JSON.parse(localStorage.getItem("tasks")),t=JSON.parse(localStorage.getItem("complete"));null===e&&(e=[]),null===t&&(t=[]),K({type:"CHANGE_LOCAL",payload:{tasks:e,complete:t}})}),[K]);var M=function(e){v(e.target.value)},P=function(e){K({type:j,payload:e})};return Object(h.jsxs)("div",{style:S,children:[i?Object(h.jsx)("p",{className:"error",children:"Le champ est vide"}):null,Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),0!==a.length?(K({type:d,payload:a.trim()}),o(!1),n("")):o(!0)},children:[Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("input",{type:"text",value:a,onChange:function(e){n(e.target.value)},className:"form-control inputT",placeholder:"Nouveau titre...",id:"text"})}),Object(h.jsx)("button",{className:"btn btn-secondary",type:"submit",children:"Ajouter"})]}),Object(h.jsxs)("div",{className:"container-tasks",children:[Object(h.jsxs)("div",{className:"container-todo",children:[Object(h.jsx)("h3",{children:"TaskList :"}),_.tasks&&!_.tasks.complete?Object(h.jsx)(c.Fragment,{children:_.tasks.map((function(e){return Object(h.jsx)(c.Fragment,{children:T&&e.id===E.id?Object(h.jsx)(c.Fragment,{children:Object(h.jsx)("div",{className:"card border-light mb-3",children:Object(h.jsxs)("div",{className:"card-body",children:[Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("input",{type:"text",value:x,onChange:M,className:"form-control",placeholder:e.title,id:"text"})}),Object(h.jsx)("button",{className:"btn btn-secondary",onClick:function(){return t=e,void(0!==x.length?(L(!1),F([]),v(""),o(!1),K({type:b,payload:{todo:t,updateText:x}})):o(!0));var t},children:Object(h.jsx)(g.a,{})})]})})}):Object(h.jsx)("div",{className:"card border-light mb-3",children:Object(h.jsxs)("div",{className:"card-body",children:[Object(h.jsxs)("h4",{className:"card-title",children:[Object(h.jsx)(y.b,{to:"/details/".concat(e.id),className:"btn btn-outline-info",children:e.title}),Object(h.jsx)("p",{className:"text-muted mt-2",children:e.realTitle}),Object(h.jsx)("p",{className:"lead mt-2",children:e.description})]}),Object(h.jsxs)("p",{className:"card-text",children:[Object(h.jsx)("button",{className:"btn btn-secondary",onClick:function(){L(!0),F(e)},children:Object(h.jsx)(N.a,{})}),Object(h.jsx)("button",{className:"btn btn-success ml-2",onClick:function(){return function(e){K({type:u,payload:e})}(e)},children:Object(h.jsx)(g.a,{})}),Object(h.jsx)("button",{className:"btn btn-danger ml-2",onClick:function(){return P(e.id)},children:Object(h.jsx)(g.b,{})})]})]})})},e.id)}))}):null]}),Object(h.jsxs)("div",{className:"container-todo",children:[Object(h.jsx)("h3",{children:"TaskListCompleted :"}),_.complete?Object(h.jsx)(c.Fragment,{children:_.complete.map((function(e){return Object(h.jsx)("div",{className:"card border-light mb-3",children:Object(h.jsxs)("div",{className:"card-body",children:[Object(h.jsx)("p",{className:"complete",children:e.title}),Object(h.jsxs)("p",{className:"card-text",children:[Object(h.jsx)("button",{className:"btn btn-warning",onClick:function(){return function(e){K({type:m,payload:e})}(e)},children:Object(h.jsx)(k.a,{})}),Object(h.jsx)("button",{className:"btn btn-danger ml-2",onClick:function(){return P(e.id)},children:Object(h.jsx)(g.b,{})})]})]})})}))}):null]})]})]})},w=a(14),T=a.n(w),L=a(19),A=a(37),I=a.n(A),E=function(){var e=Object(L.a)(T.a.mark((function e(t,a){var c,n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="https://api.openweathermap.org/data/2.5/weather?q=".concat(t,"&appid=").concat(a,"&units=metric&lang=fr"),e.next=3,I.a.get(c);case 3:if(200!==(n=e.sent).status){e.next=8;break}return e.next=7,n.data;case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),F="GET_WEATHER",D={weather:{},apiKey:"f1feb914336310d05e871b3de9fef93f",city:"Lille"},J=function(e,t){switch(t.type){case F:var a=t.payload;return Object(o.a)(Object(o.a)({},e),{},{weather:a});default:return e}},_=Object(c.createContext)(),K=function(e){var t=e.children,a=Object(c.useReducer)(J,D);return Object(h.jsx)(_.Provider,{value:a,children:t})},M=function(){var e=Object(c.useContext)(_),t=Object(l.a)(e,1)[0];return Object(h.jsx)(c.Fragment,{children:t.weather.weather?Object(h.jsx)("div",{children:t.weather.weather.map((function(e,a){return Object(h.jsxs)("div",{className:"",children:[Object(h.jsx)("h3",{className:"card-header",children:"Weather"}),Object(h.jsxs)("div",{className:"card-body",children:[Object(h.jsx)("h5",{className:"card-title",children:t.weather.name}),Object(h.jsxs)("h6",{className:"card-subtitle text-muted",children:[e.description," - ",t.weather.main.temp,"\xb0C"]})]}),Object(h.jsx)("img",{className:"d-block user-select-none m-auto",width:"200",height:"200",src:"http://openweathermap.org/img/wn/".concat(e.icon,"@2x.png"),alt:"an icon"})]},a)}))}):null})},P=function(e){e.setCity;var t=e.city,a=e.modalIsVisible,n=Object(c.useContext)(_),s=Object(l.a)(n,2),r=s[0],i=s[1];return Object(c.useEffect)((function(){var e=function(){var e=Object(L.a)(T.a.mark((function e(){var a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(t,r.apiKey);case 2:a=e.sent,i({type:F,payload:a});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(t),setInterval((function(){e(t)}),36e5)}),[a]),Object(h.jsx)("div",{children:Object(h.jsx)(M,{})})},G=function(e){var t=e.visible,a=e.setIsVisible,n=e.setCity,s=e.city,r=Object(c.useContext)(_),i=Object(l.a)(r,2),o=i[0],d=i[1],j=function(){a(!1)};return Object(h.jsx)("div",{className:"modal fade ".concat(t?"show":""," "),id:"locModal",tabIndex:"-1",role:"dialog","aria-labelledby":"locModalLabel","aria-hidden":"true",children:Object(h.jsx)("div",{className:"modal-dialog",role:"document",children:Object(h.jsxs)("div",{className:"modal-content",children:[Object(h.jsxs)("div",{className:"modal-header",children:[Object(h.jsx)("h5",{className:"modal-title",id:"locModalLabel",children:"Choose Location"}),Object(h.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(h.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(h.jsx)("div",{className:"modal-body",children:Object(h.jsxs)("form",{id:"w-form",onSubmit:function(e){e.preventDefault(),j();var t=E(s,o.apiKey);d({type:F,payload:t})},children:[Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{htmlFor:"city",children:"City"}),Object(h.jsx)("input",{onChange:function(e){n(e.target.value)},value:s,type:"text",id:"city",className:"form-control"})]}),Object(h.jsxs)("div",{className:"modal-footer",children:[Object(h.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",onClick:j,children:"Close"}),Object(h.jsx)("button",{id:"w-change-btn",type:"submit",className:"btn btn-primary",children:"Save changes"})]})]})})]})})})},H=function(){var e=Object(c.useState)(!1),t=Object(l.a)(e,2),a=t[0],n=t[1],s=Object(c.useState)("Paris"),r=Object(l.a)(s,2),i=r[0],o=r[1],d=function(){n(!a)};return Object(h.jsx)(c.Fragment,{children:Object(h.jsxs)(K,{children:[Object(h.jsxs)("div",{className:"container card mb-3 p-1 cardWeather",children:[Object(h.jsx)(P,{setCity:o,city:i,modalIsVisible:a}),Object(h.jsx)("button",{type:"button",className:"btn btn-primary","data-toggle":"modal","data-target":"#locModal",onClick:d,children:"Change Location"})]}),Object(h.jsx)(G,{visible:a,setIsVisible:d,setCity:o,city:i})]})})},R=a(3),V=function(){var e=Object(c.useState)(!1),t=Object(l.a)(e,2),a=t[0],n=t[1],s=Object(c.useContext)(f),r=Object(l.a)(s,2),i=r[0],o=r[1],d=i.tasks,j=window.location.hash.split("/")[3],b=d.filter((function(e){return+e.id===+j})),u=Object(R.f)();return Object(h.jsxs)("div",{className:"container col-lg-8 offset-lg-1",children:[Object(h.jsx)(y.b,{to:"/",className:"btn btn_link",children:"Revenir \xe0 la liste"}),a?Object(h.jsx)("div",{class:"alert alert-dismissible alert-danger",children:"Les champs ne doivent pas \xeatre vides"}):null,Object(h.jsx)("h1",{children:b[0].title}),Object(h.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),0===e.target[0].value.length||0===e.target[1].value.length)return n(!0);n(!1),o({type:O,payload:{id:+j,desc:{title:e.target[0].value,desc:e.target[1].value},task:b}}),u.push("/")},children:[Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{className:"col-form-label",htmlFor:"inputDefault",children:"Titre"}),Object(h.jsx)("input",{type:"text",className:"form-control",placeholder:b[0].realTitle,minLength:"1",id:"inputDefault"})]}),Object(h.jsxs)("div",{className:"form-group mt-5",children:[Object(h.jsx)("label",{htmlFor:"exampleTextarea",children:"Description"}),Object(h.jsx)("textarea",{className:"form-control",id:"exampleTextarea",rows:"3",placeholder:b[0].description,minLength:"1"})]}),Object(h.jsx)("button",{type:"submit",className:"btn btn-secondary",children:"Sauvegarder"})]})]})};var B=function(){return Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(H,{}),Object(h.jsxs)(R.c,{children:[Object(h.jsxs)(v,{children:[Object(h.jsx)(R.a,{path:"/details/:id",component:V}),Object(h.jsx)(R.a,{exact:!0,path:"/",component:C})]}),"/"," "]})]})},W=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,70)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),c(e),n(e),s(e),r(e)}))};r.a.render(Object(h.jsx)(y.a,{basename:"/todo",children:Object(h.jsx)(n.a.StrictMode,{children:Object(h.jsx)(B,{})})}),document.getElementById("root")),W()}},[[69,1,2]]]);
//# sourceMappingURL=main.8af82c34.chunk.js.map